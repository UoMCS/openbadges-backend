# API

This document details the various endpoints for the Open Badges backend API.

## Response codes

The following response codes are used by the API:

 * *200*: Response completed successfully, data returned.
 * *201*: Resource (e.g. badge) created. Will also include a *Location:* header containing the address of the resource.
 * *400*: Invalid data supplied.
 * *404*: Resource not found or endpoint does not exist.

Other response codes may be returned by the server (e.g. 500 Server Error) but
these are not directly generated by the backend.

## Images

Image data should be encoded and decoded with Base64 MIME. The PHP functions
`base64_encode` and `base64_decode` will handle this for you, other languages
have similar functions either built-in or available as modules.

## Creating a badge

*URL:* `/badges`  
*Method:* POST

*Response*: 201 Created, with a *Location:* header specifying the URL of the
badge.

## Fetching a badge

*URL:* `/badges/<id>`  
*Method:* GET

*Response:* JSON representation of a badge, as per the specification.

## Fetching a badge image

*URL:* `/badges/images/<id>`  
*Method:* GET

*Response:* Raw binary data for a badge image, suitable for outputting directly
to a browser.

## Creating an assertion

*URL:* `/assertions`  
*Method:* POST

*Response:* 201 Created, with a *Location:* header specifying the URL of the
badge.

Note that creating an assertion requires that the relevant badge already exists,
but an earner record will be automatically created if necessary.

## Fetching a single assertion

*URL:* `/assertions/<uid>`  
*Method:* GET

*Response:* JSON representation of an assertion, as per the specification.

## Fetching a single assertion image

*URL:* `/assertions/images/<uid>`  
*Method:* GET

*Response:* Raw binary data for an assertion image, suitable for outputting
directly to a browser.

## Fetching all assertions for an earner

*URL:* `/assertions/<email>`  
*Method:* GET

*Response:* JSON representation of an array of assertions, as per the
specification.

Note that an earner record can only exist if the earner has one or more
assertions, so this endpoint will always return either a 404 or at least one
assertion.
